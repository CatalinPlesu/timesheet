services:
  seq:
    image: docker.io/datalust/seq:latest
    container_name: timesheet-seq
    restart: unless-stopped
    ports:
      - "5341:80"
    volumes:
      - seq-data:/data
    environment:
      - ACCEPT_EULA=Y
      - SEQ_FIRSTRUN_NOAUTHENTICATION=true

  timesheet:
    image: ghcr.io/catalinplesu/timesheet:latest
    container_name: timesheet
    restart: unless-stopped
    volumes:
      - ./data:/app/data
    environment:
      - Database__ConnectionString=Data Source=/app/data/timesheet.db
      - Bot__Token=${BOT_TOKEN}
      - Serilog__WriteTo__1__Name=Seq
      - Serilog__WriteTo__1__Args__serverUrl=http://seq:80
    depends_on:
      - seq

volumes:
  seq-data:
